<app-customer-navbar></app-customer-navbar>

<div class="tracking-container">
    <!-- Search Section -->
    <div class="search-section">
        <h2>Track Your Parcel</h2>
        <form #trackingForm="ngForm">
            <div class="search-form">
                <div class="form-group">
                    <label for="bookingId">Booking ID</label>
                    <input type="text" id="bookingId" placeholder="Enter Booking ID" maxlength="7"
                        [(ngModel)]="bookingIdInput" name="bookingId" required>
                </div>
                <button type="button" (click)="trackParcel()" class="action-button">
                    Track Parcel
                </button>
            </div>
        </form>
    </div>

    <!-- Tracking Results -->
    <div class="parcels-list" *ngIf="showResult || errorMessage">
        <h2>Tracking Details</h2>
        <div class="loading" *ngIf="loading">Loading...</div>

        <div *ngIf="errorMessage" class="error-message">
            {{ errorMessage }}
        </div>

        <table *ngIf="booking && !errorMessage">
            <thead>
                <tr>
                    <th>Booking ID</th>
                    <th>Status</th>
                    <th>Booking Date</th>
                    <th>Expected Delivery</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>{{ booking.bookingId }}</td>
                    <td>{{ booking.status }}</td>
                    <td>{{ booking.bookingDate | date:'medium' }}</td>
                    <td>{{ booking.expectedDeliveryDate | date:'medium' }}</td>
                </tr>
            </tbody>
        </table>

        <div *ngIf="!booking && !loading && !errorMessage" class="no-data">
            No tracking details found.
        </div>
    </div>
</div>